= content_for(:title, "Admin - Mensajes")
.angular{'ng-controller'=>'indexCtrl',  'ng-init'=>"init()", style:"padding:30px;padding-bottom:0px;"}
  .form-inline
    .form-group
      .input-group
        .input-group-addon
          %i.fa.fa-search
        %input#input-search{"ng-model" => "buscar.$", :placeholder => "Buscar Mensaje", :type => "text"}
    %button.btn.btn-default{"ng-click" => "refresh()", :title => "Actualizar lista de mensajes"}
      %i.fa.fa-refresh#icon-refresh  
    %a.btn.btn-default{"ng-show" => "messages.data.length", "ng-click" => "allSelected()", :title => "Seleccionar todos los mensajes"}
      %i.fa.fa-check-square-o
    %button.btn.btn-default{class: "btn-{{btnDelete}}", "ng-click" => "destroy()", :title => "Borrar mensajes seleccionados"}
      %i.fa.fa-trash-o     
    %button.btn.btn-default.pull-right.hidden-xs{'disabled'=>"", style:"color:#000"}
      Página {{page}}
    %button.btn.btn-default.pull-right{"ng-click" => "nextList()", :title => "Siguiente"}
      %i.fa.fa-arrow-right
    %button.btn.btn-default.pull-right{"ng-click" => "lastList()", :title => "Atras"}
      %i.fa.fa-arrow-left
  %br
    .panel.panel-default
      .panel-heading
        %b
          %i.fa.fa-inbox
          Buzón de entrada
        %p.pull-right.hidden-xs
          %b {{messages.data.length}}
          mensajes en archivo
      .panel-body
        %table{:style => "width:100%"}
          %tbody
            %tr.row-message{class: "select-{{message.checked}}","ng-click" => "show(message.id)", :id => "row-{{message.id}}", "ng-repeat" => "message in messages.data | filter:buscar | interval:interval_a:interval_b" }
              %td.messages{class: " read-{{message.read}}", :style => "width: 1%;"}
                %input.check{:id => "check-{{message.id}}", "ng-click" => "selected(message.id);$event.stopPropagation();", :type => "checkbox", "ng-model"=>"message.checked"}
              %td.messages.hidden-xs{class: " read-{{message.read}}", :style => "width: 1%;"}
                %i.fa.fa-envelope{'ng-if'=>"message.read == false"}
                %i.fa.fa-file-text-o{'ng-if'=>"message.read == true"}
              %td.messages{class: " read-{{message.read}}"}
                {{ message.name }}  
              %td.messages.hidden-xs{ class: "read-{{message.read}}", :style => "width: 60%;"}
                {{ message.email }}  
              %td.messages{class: " read-{{message.read}}"}
                %center
                  {{ message.created_at | date}}
                  %span.hidden-xs - {{ message.created_at | date:'HH:mm'}}  
            %tr{"ng-show" => "!messages.data.length"}
              %td{:style => "width:100%"}
                %center
                  %i.fa.fa-frown-o
                  No hay mensajes.
      .panel-footer
